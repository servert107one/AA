import{h as N,i as pe,r as R,o as r,c as m,b as h,F as I,j as re,k as Ce,d as s,w as j,t as le,n as ue,l,m as Se,v as Te,q as Re,s as ae,f as je,x as he,y as w,z as A,A as be,B as ye,C as Le,D as Ue,E as T,G as de,H as ve,I as ze,J as Ee,K as Oe,L as D,M as p,N as W,O as Me,P as Be,Q as De,R as q,S as ce,T as se,U as Ie,V as Ne,W as Pe,X as We,Y as qe,Z as Ae}from"./BcXhlDeL.js";import{r as Fe}from"./D0xjQKVg.js";import{_ as He,a as Je,b as Ge}from"./r3LjAt7J.js";import{r as Qe,_ as Xe,a as Ye,b as Ze,c as Ke}from"./CQXhZ86_.js";import{_ as et}from"./BTEDazJi.js";import{T as oe,l as me,d as fe,s as ee,_ as tt}from"./ChrZpOYr.js";import{_ as st}from"./CG0tKbFU.js";import{u as ot}from"./DW5FMXsI.js";import"./SXwV9NeM.js";const rt={class:"mb-4"},lt={class:"hidden sm:block"},at={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},nt=["onMouseup"],it=["onClick"],ut={class:"absolute right-[1em] focus:outline-none"},dt=h("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1),ct=N({__name:"BacktestTabs",props:{tabs:{},currentTab:{}},emits:["close"],setup(L,{emit:a}){const u=pe(),b=R(u.params.id),c=a;function i(o){if(!o.form.routes.length)return"New Tab";if(o.results.exception.error&&o.results.executing)return"Error";const d=o.form.routes[0];let f="";return d.strategy&&(f+=`${d.strategy} • `),d.symbol&&(f+=`${d.symbol} • `),d.timeframe&&(f+=`${d.timeframe}`),f=f.endsWith(" • ")?f.slice(0,-3):f,o.results.executing?`${f} | ${o.results.progressbar.current}%`:o.results.showResults?`${f} | Results`:f}return(o,d)=>{const f=je;return r(),m("div",rt,[h("div",lt,[h("nav",at,[(r(!0),m(I,null,re(o.tabs,v=>(r(),m("div",{key:v.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",onMouseup:Ce(y=>c("close",v.id),["middle"])},[s(f,{to:`/backtest/${v.id}`,class:ue([v.id===l(b)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"])},{default:j(()=>[h("span",null,le(i(v)),1),h("span",{"aria-hidden":"true",class:ue([v.id===l(b)&&Object.keys(o.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)]),_:2},1032,["to","class"]),Se(h("button",{class:"absolute right-[1em] focus:outline-none",onClick:y=>c("close",v.id)},[s(l(Re),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,it),[[Te,Object.keys(o.tabs).length>1]])],40,nt))),128)),h("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-white dark:hover:bg-gray-800 flex items-center justify-center",onClick:d[0]||(d[0]=v=>l(ae)().addTab(o.currentTab))},[h("button",ut,[s(l(Fe),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),dt])])])])}}}),ge={width:800,height:400,priceScale:{borderColor:"rgba(197, 203, 206, 1)"},timeScale:{borderColor:"rgba(197, 203, 206, 1)",timeVisible:!0,secondsVisible:!1}},mt={chart:{layout:{background:{color:"#ffffff"},textColor:"rgba(33, 56, 77, 1)"},grid:{vertLines:{color:"#f1f1f1",visible:!0},horzLines:{color:"#f1f1f1",visible:!0}},priceScale:{borderColor:"rgba(197, 203, 206, 0.6)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.6)",timeVisible:!0,secondsVisible:!1}}},ft={chart:{layout:{background:{color:"#333333"},textColor:"#D1D5DB"},grid:{vertLines:{color:"#525252",visible:!0},horzLines:{color:"#525252",visible:!0}},priceScale:{borderColor:"#525252"},timeScale:{borderColor:"#525252",timeVisible:!0,secondsVisible:!1}}},gt={class:"mt-2"},pt={class:"ml-2"},ht=N({__name:"EquityCurve",props:{data:{}},setup(L){const a=he(),u=w(()=>a.value),b=R();let c=null,i=[];const o=L;A(o.data,y=>{}),A(u,y=>{v(y)}),be(async()=>{await d()});async function d(){ge.width=b.value.clientWidth,c=oe(b.value,ge);for(const y of o.data){const x=c.addLineSeries({lineWidth:2});x.setData(y.data),i.push(x)}c.timeScale().fitContent(),v(u.value)}ye(()=>{f()});function f(){c!==null&&(c.remove(),c=null),i&&(i=[])}function v(y){c===null||i===null||c.applyOptions(y==="light"?mt.chart:ft.chart)}return(y,x)=>(r(),m(I,null,[h("div",{ref_key:"chartContainer",ref:b,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600"},null,512),h("div",gt,[(r(!0),m(I,null,re(y.data,U=>(r(),m("span",{key:U.name,class:"text-xs mr-2 rounded bg-white dark:bg-gray-700 p-1"},[h("span",{class:"inline-block",style:Le({backgroundColor:U.color,width:"25px",height:"10px"})},null,4),h("span",pt,le(U.name),1)]))),128))])],64))}}),bt={class:"flex items-center justify-between"},yt=N({__name:"FullscreenModal",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(L){const a=Ue(L,"modelValue");return(u,b)=>{const c=ve,i=ze,o=Ee;return r(),T(o,{modelValue:a.value,"onUpdate:modelValue":b[1]||(b[1]=d=>a.value=d),fullscreen:""},{default:j(()=>[s(i,{ui:{base:"h-full flex flex-col",rounded:"",divide:"divide-y divide-gray-100 dark:divide-gray-800",body:{base:"grow"}}},{header:j(()=>[h("div",bt,[h("div",null,[de(u.$slots,"title")]),s(c,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:b[0]||(b[0]=d=>a.value=!1)})])]),default:j(()=>[de(u.$slots,"default")]),_:3})]),_:3},8,["modelValue"])}}}),vt={class:"flex flex-col h-full border dark:border-gray-800"},kt={key:0},_t=N({__name:"BacktestCandlesChart",props:{form:{},results:{}},setup(L){const a=he(),u=L,b=R(),c=R([]);let i=null,o=null;const d=[],f=[],v=w(()=>Oe().params.id),y=w(()=>D.extraChartLines[v.value].find(k=>k.symbol===u.results.selectedRoute.symbol)),x=w(()=>a.value);A(x,k=>{J(k)}),A(()=>u.results.selectedRoute.symbol,()=>{H(),setTimeout(async()=>{await U()},100)}),be(async()=>{setTimeout(async()=>{await U()},200)});async function U(){var Q,X,S,Y;ee.width=b.value.clientWidth,ee.height=b.value.clientHeight-Object.keys(y.value.charts).length*150,i=oe(b.value,ee),i.applyOptions({rightPriceScale:{borderColor:x.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${u.results.selectedRoute.symbol} • ${u.results.selectedRoute.timeframe}`}}),o=i.addCandlestickSeries();const k=D.candles[v.value].find(g=>g.symbol===u.results.selectedRoute.symbol).candles;o.setData(k),o.setMarkers(D.orders[v.value].find(g=>g.symbol===u.results.selectedRoute.symbol).orders);const $=(X=(Q=D.lines[v.value])==null?void 0:Q.find(g=>g.symbol===u.results.selectedRoute.symbol))==null?void 0:X.lines;if($)for(const g of Object.keys($)){const e=$[g];i.addLineSeries({lineWidth:1,title:g}).setData(e.data)}const C=(Y=(S=D.horizontalLines[v.value])==null?void 0:S.find(g=>g.symbol===u.results.selectedRoute.symbol))==null?void 0:Y.lines;if(C)for(const g of Object.keys(C)){const t=C[g];o.createPriceLine(t)}i.timeScale().fitContent();const G=new Set;Object.keys(y.value.charts).forEach((g,e)=>{const t={...ee};t.width=c.value[e].clientWidth,t.height=150;const V=oe(c.value[e],t);d.push(V),Object.keys(y.value.charts[g]).forEach(z=>{var Z,O;const E=V.addLineSeries({lineWidth:1,title:z}),_=(O=(Z=D.horizontalExtraLines[v.value])==null?void 0:Z.find(B=>B.symbol===u.results.selectedRoute.symbol))==null?void 0:O.lines[g];if(_&&!G.has(g)){for(const B of Object.keys(_)){const K=_[B];E.createPriceLine(K)}G.add(g)}E.setData(y.value.charts[g][z].data),f.push(E)}),V.applyOptions({rightPriceScale:{borderColor:x.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:g}}),V.timeScale().subscribeVisibleLogicalRangeChange(z=>{i.timeScale().setVisibleLogicalRange(z)}),e!==Object.keys(y.value.charts).length-1&&V.timeScale().applyOptions({visible:!1})}),i.subscribeCrosshairMove(g=>{const e=F(o,g);Object.keys(y.value.charts).forEach((t,V)=>{P(d[V],f[V],e)})}),Object.keys(y.value.charts).forEach((g,e)=>{d[e].subscribeCrosshairMove(t=>{const V=F(f[e],t);P(i,o,V),d.forEach((z,E)=>{E!==e&&P(z,f[E],V)})})}),i.timeScale().subscribeVisibleLogicalRangeChange(g=>{d.forEach(e=>{e.timeScale().setVisibleLogicalRange(g)})}),J(x.value),d.length>0&&i.timeScale().applyOptions({visible:!1})}ye(()=>{H()});function F(k,$){return $.time&&$.seriesData.get(k)||null}function P(k,$,C){if(C){k.setCrosshairPosition(C.value,C.time,$);return}k.clearCrosshairPosition()}function H(){i!==null&&(i.remove(),i=null),o!==null&&(o=null),d.length>0&&(d.forEach(k=>{k.remove()}),d.length=0),f.length>0&&(f.length=0)}function J(k){i!==null&&(i.applyOptions(k==="light"?me.chart:fe.chart),d.forEach($=>{$.applyOptions(k==="light"?me.chart:fe.chart)}))}return(k,$)=>(r(),m("div",vt,[h("div",{ref_key:"chartContainer",ref:b,class:"rounded overflow-hidden flex-grow"},null,512),l(y)&&Object.keys(l(y).charts).length?(r(),m("div",kt,[(r(!0),m(I,null,re(Object.keys(l(y).charts),C=>(r(),m("div",{key:C,ref_for:!0,ref_key:"extraChartsRef",ref:c,class:"relative border-t-[1.5px] dark:border-gray-800"}))),128))])):p("",!0)]))}}),wt=["value"],xt={key:1,class:"flex flex-col items-center justify-center select-none mt-[10%]"},$t=["textContent"],Vt={class:"mt-8"},Ct={class:"mt-8"},St={class:"mt-4"},Tt=["href"],Rt={key:1,class:"mx-auto container mt-8"},jt={key:0},Lt={class:"flex items-center select-none flex-1 my-4"},Ut={class:"grid grid-cols-1 gap-6 mt-8"},zt={key:1,class:"w-full mx-auto"},Et={key:4,class:"text-yellow-500 border-yellow-400 bg-yellow-50 dark:bg-gray-700 dark:text-yellow-400 mt-16 text-center text-2xl rounded border-2 border-dashed dark:border-gray-800 py-16 select-none"},Ot={key:0},Mt={key:0},Bt=["href"],Dt=["href"],It=["href"],Nt=["href"],Pt=["href"],Wt={key:6,class:"my-4"},qt={key:1},At=N({__name:"BacktestTab",props:{form:{},results:{}},setup(L){const a=L,u=R([]),b=R(!1),c=R(!1),i=W().authToken,o=R(Me().public.apiBaseUrl),d=R(!1),f=ae(),v=w(()=>W().jesseSupportedTimeframes.map(e=>({label:e,value:e}))),y=w(()=>a.form.routes.map(e=>({label:`${e.strategy} • ${e.symbol}`,value:e})));a.results.selectedRoute=a.form.routes[0];const x=R([]);async function U(){x.value=await W().getExchangeSupportedSymbols(a.form.exchange);for(let e=0;e<a.form.routes.length;e++)x.value.includes(a.form.routes[e].symbol)||(a.form.routes[e].symbol=x.value[0]);if(a.form.data_routes.length>0)for(let e=0;e<a.form.data_routes.length;e++)x.value.includes(a.form.data_routes[e].symbol)||(a.form.data_routes[e].symbol=x.value[0])}a.form.exchange=a.form.exchange||W().backtestingExchangeNames[0],U();const{cancel:F,rerun:P,newBacktest:H}=f;function J(e){if(u.value.length){for(let t=0;t<u.value.length;t++)se("error",u.value[t]);return}f.start(e)}const k=e=>{if(u.value.length){for(let t=0;t<u.value.length;t++)se("error",u.value[t]);return}f.startInNewTab(e)},$=w(()=>{let e=`/download/backtest/log/${a.results.generalInfo.session_id}?token=${i}`;return o.value!=="/"&&(e=o.value+e),e}),C=w(()=>{let e=`/download/backtest/tradingview/${a.results.generalInfo.session_id}?token=${i}`;return o.value!=="/"&&(e=o.value+e),e}),G=w(()=>{let e=`/download/backtest/full-reports/${a.results.generalInfo.session_id}?token=${i}`;return o.value!=="/"&&(e=o.value+e),e}),Q=w(()=>{let e=`/download/backtest/csv/${a.results.generalInfo.session_id}?token=${i}`;return o.value!=="/"&&(e=o.value+e),e}),X=w(()=>{let e=`/download/backtest/json/${a.results.generalInfo.session_id}?token=${i}`;return o.value!=="/"&&(e=o.value+e),e}),S=w(()=>a.results.metrics.length>0),Y=w(()=>Be.remainingTimeText(a.results.progressbar.estimated_remaining_seconds));function g(){navigator.clipboard.writeText(a.results.infoLogs),se("success","Logs copied successfully"),c.value=!0,setTimeout(()=>{c.value=!1},3e3)}return A(()=>a.form.start_date,e=>{a.form.finish_date<e&&(a.form.finish_date=e)}),(e,t)=>{const V=He,z=Ie,E=Xe,_=ve,Z=Ye,O=Ne,B=et,ne=Je,K=Pe,M=We,ke=ht,ie=qe,_e=yt,we=Ze,te=st,xe=tt,$e=Ge,Ve=Ke;return r(),m(I,null,[e.form.debug_mode?(r(),T(z,{key:0,modelValue:e.results.logsModal,"onUpdate:modelValue":t[0]||(t[0]=n=>e.results.logsModal=n),title:"Logs"},{default:j(()=>[s(V,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:j(()=>[h("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:g},[l(c)?(r(),T(l(De),{key:0,class:"h-6 w-6","aria-hidden":"true"})):p("",!0),!l(c)&&e.results.infoLogs.length!=0?(r(),T(l(Qe),{key:1,class:"h-6 w-6","aria-hidden":"true"})):p("",!0)]),h("input",{id:"copy-info-logs",type:"hidden",value:e.results.infoLogs},null,8,wt)]),_:1},8,["modelValue"])):p("",!0),e.results.executing&&!e.results.showResults?(r(),m("div",xt,[h("div",null,[s(E,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?p("",!0):(r(),m("h3",{key:0,class:"mt-8 animate-pulse",textContent:le(l(Y))},null,8,$t)),h("div",Vt,[h("div",Ct,[s(_,{color:"gray",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},class:"w-64 flex justify-center",icon:"i-heroicons-no-symbol",size:"xl",variant:"solid",label:"Cancel",trailing:!1,onClick:t[1]||(t[1]=n=>l(F)((e._.provides[q]||e.$route).params.id))})]),h("div",St,[e.form.debug_mode&&e.results.exception.error&&e.results.progressbar.current!==0?(r(),m("a",{key:0,href:l($),class:"flex justify-center items-center btn-secondary text-center mb-4 w-full"},[s(_,{icon:"i-heroicons-document-arrow-down",label:"Debugging Logs",color:"gray",size:"xl",variant:"solid",trailing:!1,class:"w-64 flex justify-center"})],8,Tt)):p("",!0)])]),e.results.exception.error&&e.results.executing?(r(),m("div",Rt,[s(Z,{modelValue:l(b),"onUpdate:modelValue":t[2]||(t[2]=n=>ce(b)?b.value=n:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"backtest","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):p("",!0)])):p("",!0),s(Ve,{else:""},{left:j(()=>[!e.results.executing&&!e.results.showResults?(r(),m("div",jt,[s(O,{class:"mb-4",title:"Exchange"}),s(B,{modelValue:e.form.exchange,"onUpdate:modelValue":t[3]||(t[3]=n=>e.form.exchange=n),placeholder:"Select an exchange...",searchable:"",options:l(W)().backtestingExchangeNames,size:"lg",class:"mt-2 mb-16",onChange:U},null,8,["modelValue","options"]),s(ne,{"total-routes-error":l(u),timeframes:l(v),form:e.form,results:e.results,symbols:l(x),mode:"backtest"},null,8,["total-routes-error","timeframes","form","results","symbols"]),s(O,{class:"mt-16",title:"Duration"}),h("div",Lt,[s(K,{modelValue:e.form.start_date,"onUpdate:modelValue":t[4]||(t[4]=n=>e.form.start_date=n),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),s(K,{modelValue:e.form.finish_date,"onUpdate:modelValue":t[5]||(t[5]=n=>e.form.finish_date=n),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])]),s(O,{class:"mt-16",title:"Options"}),h("div",Ut,[s(M,{modelValue:e.form.debug_mode,"onUpdate:modelValue":t[6]||(t[6]=n=>e.form.debug_mode=n),title:"Debug Mode",description:"Logs every step of the execution. Very helpful for debugging your strategy but takes a lot longer to execute"},null,8,["modelValue"]),s(M,{modelValue:e.form.export_chart,"onUpdate:modelValue":t[7]||(t[7]=n=>e.form.export_chart=n),title:"Generate Interactive Charts",description:"Generate interactive charts for backtest results with details."},null,8,["modelValue"]),s(M,{modelValue:e.form.export_tradingview,"onUpdate:modelValue":t[8]||(t[8]=n=>e.form.export_tradingview=n),title:"Export Tradingview",description:"Exports the executed trades in a format accepted by TradingView's Pine Editor. Useful to look at the executed orders on their chart."},null,8,["modelValue"]),s(M,{modelValue:e.form.export_full_reports,"onUpdate:modelValue":t[9]||(t[9]=n=>e.form.export_full_reports=n),title:"Export QuantStats reports",description:"Exports a HTML file generated by QuantStats library."},null,8,["modelValue"]),s(M,{modelValue:e.form.export_csv,"onUpdate:modelValue":t[10]||(t[10]=n=>e.form.export_csv=n),title:"Export CSV",description:"Exports executed trades in a CSV format"},null,8,["modelValue"]),s(M,{modelValue:e.form.export_json,"onUpdate:modelValue":t[11]||(t[11]=n=>e.form.export_json=n),title:"Export JSON",description:"Exports executed trades in a JSON format"},null,8,["modelValue"]),s(M,{modelValue:e.form.fast_mode,"onUpdate:modelValue":t[12]||(t[12]=n=>e.form.fast_mode=n),title:"Fast Mode",description:"Runs the backtest faster by using an improved algorithm. This is supposed to yield the same results; however, it's currently experimental, which is why it's an option."},null,8,["modelValue"]),s(M,{modelValue:e.form.benchmark,"onUpdate:modelValue":t[13]||(t[13]=n=>e.form.benchmark=n),title:"Benchmark",description:"If enabled, the backtest will compare the performance of the strategy against the buy and hold strategy of the market."},null,8,["modelValue"])])])):p("",!0),e.results.showResults?(r(),m("div",zt,[h("div",null,[l(S)?(r(),T(O,{key:0,class:"mb-4",title:"Equity Curve"})):p("",!0),l(S)?(r(),T(ke,{key:1,data:e.results.charts.equity_curve},null,8,["data"])):p("",!0),l(S)?(r(),T(O,{key:2,class:"mt-16 mb-4",title:"Performance"})):p("",!0),l(S)?(r(),T(ie,{key:3,data:e.results.metrics},null,8,["data"])):p("",!0),l(S)?p("",!0):(r(),m("div",Et," No trades were executed via this strategy! "))]),s(_e,{modelValue:l(d),"onUpdate:modelValue":t[15]||(t[15]=n=>ce(d)?d.value=n:null)},{title:j(()=>[s(B,{modelValue:e.results.selectedRoute,"onUpdate:modelValue":t[14]||(t[14]=n=>e.results.selectedRoute=n),"value-attribute":"value",options:l(y)},null,8,["modelValue","options"])]),default:j(()=>[s(_t,{results:e.results,form:e.form},null,8,["results","form"])]),_:1},8,["modelValue"])])):p("",!0)]),right:j(()=>[e.results.executing?p("",!0):(r(),m("div",Ot,[e.results.showResults?(r(),m("div",Mt,[s(_,{class:"w-full flex justify-center",icon:"i-heroicons-arrow-path",size:"xl",variant:"solid",label:"Rerun",trailing:!1,onClick:t[16]||(t[16]=n=>l(P)((e._.provides[q]||e.$route).params.id))}),s(_,{class:"w-full flex justify-center mt-4",color:"green",icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",label:"New session",trailing:!1,onClick:t[17]||(t[17]=n=>l(H)((e._.provides[q]||e.$route).params.id))}),e.form.debug_mode?(r(),m("a",{key:0,href:l($),target:"_blank",class:""},[s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"Debugging Logs",trailing:!1})],8,Bt)):p("",!0),e.form.export_chart?(r(),T(_,{key:1,class:"mt-4 flex justify-center items-center btn-secondary text-center",color:"gray",icon:"i-heroicons-chart-bar",size:"xl",block:"",variant:"solid",label:"View charts",trailing:!1,onClick:t[18]||(t[18]=n=>d.value=!0)})):p("",!0),e.form.export_full_reports&&l(S)?(r(),m("a",{key:2,href:l(G),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"QuantStats Report",trailing:!1})],8,Dt)):p("",!0),e.form.export_csv&&l(S)?(r(),m("a",{key:3,href:l(Q),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"CVS",trailing:!1})],8,It)):p("",!0),e.form.export_json&&l(S)?(r(),m("a",{key:4,href:l(X),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"JSON",trailing:!1})],8,Nt)):p("",!0),e.form.export_tradingview&&l(S)?(r(),m("a",{key:5,href:l(C),target:"_blank",class:"flex justify-center items-center btn-secondary text-center mb-4 w-full"},[s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"TradingView Pine Editor",trailing:!1})],8,Pt)):p("",!0),e.results.showResults&&e.results.alert&&e.results.alert.message?(r(),m("div",Wt,[s(we,{color:"teal",icon:"i-heroicons-check-circle",variant:"soft",title:e.results.alert.message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:t[19]||(t[19]=n=>e.results.alert.message="")},null,8,["title"])])):p("",!0),s(te,{class:"mt-8 mb-4",size:"lg",label:"General Info"}),s(xe,{data:e.results.info},null,8,["data"]),s(te,{class:"mt-8 mb-4",size:"lg",label:"Routes"}),s($e,{data:e.results.routes_info,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),e.results.hyperparameters.length?(r(),T(te,{key:7,class:"mt-8 mb-4",size:"lg",label:"Hyperparameters"})):p("",!0),e.results.hyperparameters.length?(r(),T(ie,{key:8,data:e.results.hyperparameters},null,8,["data"])):p("",!0)])):(r(),m("div",qt,[s(_,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:t[20]||(t[20]=n=>J((e._.provides[q]||e.$route).params.id))}),s(_,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-plus",size:"xl",variant:"solid",label:"Start in a new tab",trailing:!1,onClick:t[21]||(t[21]=n=>k((e._.provides[q]||e.$route).params.id))})]))]))]),_:1})],64)}}}),Ft={class:"w-full"},ts=N({__name:"[id]",setup(L){ot({title:"Backtest - Jesse"});const a=ae(),u=w(()=>a.tabs),b=w(()=>pe().params.id),c=w(()=>{if(!u.value[b.value]){const i=Object.keys(u.value);if(i.length>0){const o=u.value[i[0]];return Ae().push(`/backtest/${o.id}`),o}}return u.value[b.value]});return Object.keys(u.value).length===0&&a.addTab(),(i,o)=>{const d=ct,f=At;return r(),m(I,null,[h("div",Ft,[s(d,{"current-tab":c.value?c.value.id:null,tabs:u.value,mode:"backtest",onClose:l(a).closeTab},null,8,["current-tab","tabs","onClose"])]),c.value?(r(),T(f,{key:0,form:c.value.form,results:c.value.results},null,8,["form","results"])):p("",!0)],64)}}});export{ts as default};
