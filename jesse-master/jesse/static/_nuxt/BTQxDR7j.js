import{o as a,c as f,b as l,h as z,i as he,r as $,F,j as ae,k as Pe,d as o,w as x,t as N,n as le,l as n,m as Ie,v as Ue,q as je,ae as q,N as Q,T as B,f as Ae,y as h,P as R,E as V,e as _e,a1 as Me,W as Re,a7 as ke,af as Oe,H as ie,a8 as Be,a as Ne,ag as ze,ah as pe,ai as De,aj as Fe,ak as qe,al as He,am as We,x as Ye,K as Qe,z as ee,A as Ze,B as Je,a9 as fe,M as k,S as D,Q as ge,R as te,U as Ge,a3 as Ke,V as Xe,X as et,Z as tt}from"./BcXhlDeL.js";import{r as st}from"./D0xjQKVg.js";import{b as xe,_ as ot,a as rt}from"./r3LjAt7J.js";import{_ as nt}from"./SXwV9NeM.js";import{r as ve,_ as lt,a as at,d as it,c as ut}from"./CQXhZ86_.js";import{_ as dt}from"./BTEDazJi.js";import{s as ye,T as ct,l as mt,d as pt,_ as ft}from"./ChrZpOYr.js";import{u as gt}from"./DW5FMXsI.js";function be(w,t){return a(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function vt(w,t){return a(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}const yt={base:"animate-pulse",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-md"},bt={class:"mb-4"},ht={class:"hidden sm:block"},_t={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},kt=["onMouseup"],xt=["onClick"],$t={class:"absolute right-[1em] focus:outline-none"},wt=l("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1),Tt=z({__name:"LiveTabs",props:{tabs:{}},emits:["close"],setup(w,{emit:t}){const v=he(),g=$(v.params.id),b=t;function r(){if(Object.keys(q().tabs).length>=Q().planLimits.live_trading_tabs){B("error",`You have reached the limit of "${Q().planLimits.live_trading_tabs}" tabs for your "${Q().plan}" plan. Please upgrade your plan to add more tabs.`);return}q().addTab()}function _(d){if(!d.form.routes.length)return"New Tab";if(d.results.exception.error&&d.results.monitoring)return"Error";const c=d.form.routes[0];let i="";const m=d.form.exchange;return m&&(i+=`${m} â€¢ `),c.strategy&&(i+=`${c.strategy} â€¢ `),c.symbol&&(i+=`${c.symbol} â€¢ `),c.timeframe&&(i+=`${c.timeframe}`),i=i.endsWith(" â€¢ ")?i.slice(0,-3):i,d.results.monitoring&&!d.results.finished?`ðŸŸ¢ ${i}`:d.results.exception.error&&d.results.monitoring?`ðŸ”´ ${i}`:d.results.showResults?`${i} | Results`:i}return(d,c)=>{const i=Ae;return a(),f("div",bt,[l("div",ht,[l("nav",_t,[(a(!0),f(F,null,ae(d.tabs,m=>(a(),f("div",{key:m.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",onMouseup:Pe(I=>b("close",m.id),["middle"])},[o(i,{to:`/live/${m.id}`,class:le([m.id===n(g)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"])},{default:x(()=>[l("span",null,N(_(m)),1),l("span",{"aria-hidden":"true",class:le([m.id===n(g)&&Object.keys(d.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)]),_:2},1032,["to","class"]),Ie(l("button",{class:"absolute right-[1em] focus:outline-none",onClick:I=>b("close",m.id)},[o(n(je),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,xt),[[Ue,Object.keys(d.tabs).length>1&&(!m.results.monitoring||m.results.finished)]])],40,kt))),128)),l("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center",onClick:r},[l("button",$t,[o(n(st),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),wt])])])])}}}),Ct=z({__name:"LiveOrders",props:{orders:{}},setup(w){const t=w,v=h(()=>{if(!t.orders.length)return[];const g=[];for(let b=t.orders.length-1;b>=0;b--){const r=t.orders[b];g.push([{value:r.id.slice(-12),style:"text-xs",tooltip:r.id,tag:"code"},{value:R.timestampToTimeOnly(r.created_at),style:"text-xs",tooltip:R.timestampToTime(r.created_at)},{value:r.symbol,style:"text-xs"},{value:r.type,style:"text-xs"},{value:r.side,style:R.colorBasedOnSide(r.side)},{value:r.price,style:"text-xs"},{value:r.qty,style:R.colorBasedOnSide(r.side)},{value:r.status,style:"text-xs"}])}return g});return(g,b)=>{const r=xe,_=nt;return n(v).length?(a(),V(r,{key:0,data:n(v),"header-items":["ID","Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])):(a(),V(_,{key:1}))}}}),Vt=l("p",null," If you think something is wrong with your running live session, you can submit a report. By submitting this form, the logs of this session will be sent to Jesse's developers so we can see what's going on. ",-1),Lt=l("br",null,null,-1),St=l("p",null,[_e("Your exchange API keys and strategies are safe and "),l("b",null,"are never sent to us.")],-1),Et=l("br",null,null,-1),Pt=l("br",null,null,-1),It=l("br",null,null,-1),Ut={class:"flex justify-end item-center"},jt={class:"flex justify-end"},At=z({__name:"ReportLiveSession",props:{session:{}},emits:["close"],setup(w,{emit:t}){const v=t,g=$(!1),b=w,r=$({description:"",email:""}),_=()=>{v("close")},d=async()=>{if(g.value=!0,!r.value.description){B("error","Please enter a description."),g.value=!1;return}const{data:c,error:i}=await Me("/report-exception",{description:r.value.description,email:r.value.email,traceback:"manual report",mode:"live",attach_logs:!0,session_id:b.session},!0);if(g.value=!1,i.value&&i.value.statusCode!==200){B("error",`[${i.value.statusCode}]: ${i.value.statusText}`);return}const m=c.value;m.status==="success"?(r.value.description="",r.value.email="",B("success",m.message),_()):m.status==="error"&&B("error",m.message)};return(c,i)=>{const m=Re,I=ke,O=Oe,T=ie,U=Be;return a(),f(F,null,[Vt,Lt,St,Et,o(U,{state:n(r),class:"space-y-4",onSubmit:d},{default:x(()=>[o(I,{label:"Email (optional)",help:"Enter your email address for us to know who sent the email and possibly reply back to you."},{default:x(()=>[o(m,{modelValue:n(r).email,"onUpdate:modelValue":i[0]||(i[0]=L=>n(r).email=L),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1}),Pt,o(I,{label:"Description:",name:"Description"},{default:x(()=>[o(O,{modelValue:n(r).description,"onUpdate:modelValue":i[1]||(i[1]=L=>n(r).description=L),rows:10,placeholder:"Describe what you think is wrong in this session..."},null,8,["modelValue"])]),_:1}),It,l("div",Ut,[l("div",jt,[o(T,{color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:i[2]||(i[2]=L=>_())}),o(T,{type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:n(g),disabled:n(g)},null,8,["loading","disabled"])])])]),_:1},8,["state"])],64)}}}),Mt=ze(pe.ui.strategy,pe.ui.skeleton,yt),Rt=z({inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(w){const{ui:t,attrs:v}=De("skeleton",Fe(w,"ui"),Mt),g=h(()=>qe(He(t.value.base,t.value.background,t.value.rounded),w.class));return{ui:t,attrs:v,skeletonClass:g}}});function Ot(w,t,v,g,b,r){return a(),f("div",We({class:w.skeletonClass},w.attrs),null,16)}const Bt=Ne(Rt,[["render",Ot]]),Nt={class:"mb-16"},zt={key:0,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600 p-4"},Dt={key:1},Ft=z({__name:"CandlesChart",props:{form:{},results:{}},setup(w){const t=Ye(),v=h(()=>Qe().params.id),g=$(!0),b=$(2),r=w,_=$();let d=null,c=null;const i={orderEntries:{},positionEntry:null},m=h(()=>t.value),I=r.form.exchange,O=h(()=>`${I}-${r.results.selectedRoute.symbol}-${r.results.selectedRoute.timeframe}`),T=h(()=>r.results.currentCandles),U=h(()=>{const p=r.results.positions.find(y=>y[0].value===r.results.selectedRoute.symbol);return p===void 0?[]:p}),L=h(()=>U.value[2].value),H=h(()=>Number(U.value[1].value)>0?"long":Number(U.value[1].value)<0?"short":"close");ee(T,(p,y)=>{c!==null&&se(p[O.value])}),ee(m,p=>{X(p)}),ee(L,(p,y)=>{c!==null&&p!==y&&G()}),ee(()=>r.results.orders,()=>{c!==null&&K()},{deep:!0}),Ze(async()=>{setTimeout(async()=>{await Z()},200)});async function Z(){g.value=!0,await q().fetchCandles(v.value),g.value=!1,ye.width=_.value.clientWidth,d=ct(_.value,ye),d.applyOptions({watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${r.results.selectedRoute.symbol} â€¢ ${r.results.selectedRoute.timeframe}`}}),c=d.addCandlestickSeries(),c.setData(r.results.candles),d.timeScale().fitContent(),c.applyOptions({priceFormat:{type:"price",precision:b.value,minMove:.01}}),G(),K(),X(m.value)}Je(()=>{J()});function J(){d!==null&&(d.remove(),d=null),c&&(c=null)}function G(){const p=H.value==="long"?"#00AB5C":"#FF497D";if(i.positionEntry&&c.removePriceLine(i.positionEntry),Number(L.value)>0){const y={price:Number(L.value),color:p,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"Entry Price"};i.positionEntry=c.createPriceLine(y)}}function K(){const p=U.value[0].value;for(const y in i.orderEntries)c.removePriceLine(i.orderEntries[y]),delete i.orderEntries[y];r.results.orders.forEach(y=>{const S=y.side==="buy"?"#00AB5C":"#FF497D",A=fe.startCase(fe.lowerCase(`${y.side} ${y.type}`));if((y.status==="ACTIVE"||y.status==="QUEUED")&&y.symbol===p){const M={price:Number(y.price),color:S,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:A};i.orderEntries[y.id]=c.createPriceLine(M)}})}function se(p){if(p===void 0)throw new TypeError("candle is undefined!");if(r.results.candles.length===0||r.results.candles[r.results.candles.length-1].time>p.time)return;const S=String(p.open).indexOf("."),A=S===-1?0:String(p.open).length-S-1;b.value!==A&&(b.value=A,c.applyOptions({priceFormat:{type:"price",precision:b.value,minMove:Math.pow(10,-A).toFixed(A)}})),c.update(p)}function X(p){d!==null&&d.applyOptions(p==="light"?mt.chart:pt.chart)}function oe(p){r.results.selectedRoute=p,J(),Z()}return(p,y)=>{const S=Bt,A=ie;return a(),f("div",Nt,[n(g)?(a(),f("div",zt,[o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-2/3 mb-4"}),o(S,{class:"h-4 w-1/2 mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-2/3 mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-full"})])):k("",!0),l("div",{ref_key:"chartContainer",ref:_,class:le({"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600":!n(g)})},null,2),r.form.routes.length>1?(a(),f("div",Dt,[(a(!0),f(F,null,ae(r.form.routes,M=>(a(),V(A,{key:M.symbol,variant:"soft",color:"gray",disabled:p.results.selectedRoute.symbol===M.symbol&&p.results.selectedRoute.timeframe===M.timeframe,class:"mt-2 mr-2",onClick:ue=>oe(M)},{default:x(()=>[_e(N(M.symbol)+" â€¢ "+N(M.timeframe),1)]),_:2},1032,["disabled","onClick"]))),128))])):k("",!0)])}}}),qt={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},Ht=["textContent"],Wt={class:"mt-8"},Yt={key:1,class:"mx-auto container mt-8"},Qt={key:0,"data-cy":"live-page-content"},Zt={class:"flex justify-between items-center"},Jt=l("span",null," No exchange API keys found. Please add at least one: ",-1),Gt={class:"grid grid-cols-1 gap-6"},Kt={class:"flex justify-between items-center"},Xt=l("span",null," No notification API keys found. Please add at least one: ",-1),es={key:1},ts={key:0,class:"mb-8"},ss=l("span",null,"More",-1),os={key:0},rs={key:0,class:"mt-8 lg:mt-0"},ns={key:1,"data-cy":"live-action-button"},ls={key:1,class:"my-8 border-2 dark:border-gray-600 rounded-full"},as={key:2,class:"bg-white dark:bg-gray-700 grid grid-cols-1 gap-6 border dark:border-gray-600 rounded py-4 px-6 select-none"},is={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},us={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ds={class:"flex justify-between items-center"},cs={class:"flex justify-start items-center"},ms=l("span",null,"Info Logs:",-1),ps={class:"focus:outline-none flex justify-start items-center"},fs={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},gs={class:"flex justify-between items-center"},vs={class:"flex justify-start items-center"},ys=l("span",null,"Error Logs:",-1),bs={class:"focus:outline-none flex justify-start items-center"},hs={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},_s={key:3},ks=z({__name:"LiveTab",props:{form:{},results:{},session:{}},setup(w){const t=w,v=$([]),g=$(!1),b=$(!1),r=$(!1),_=$(!1),d=$(!1),c=$(!1),i=$(!1),m=$(!1),I=$(!1),O=$(!1),T=Q(),U=q(),L=$([]);async function H(){if(!t.form.paper_mode){const e=T.exchangeApiKeys.find(s=>s.id===t.form.exchange_api_key_id);e&&(t.form.exchange=e.exchange)}L.value=await Q().getExchangeSupportedSymbols(t.form.exchange);for(let e=0;e<t.form.routes.length;e++)L.value.includes(t.form.routes[e].symbol)||(t.form.routes[e].symbol=L.value[0]);if(t.form.data_routes.length>0)for(let e=0;e<t.form.data_routes.length;e++)L.value.includes(t.form.data_routes[e].symbol)||(t.form.data_routes[e].symbol=L.value[0])}t.form.exchange&&H();const Z=h(()=>{const e=[{label:"Exchange",value:t.results.generalInfo.exchange},{label:"Current Time",value:R.timestampToTime(t.results.generalInfo.current_time)},{label:"Debug Mode",value:t.results.generalInfo.debug_mode},{label:"Paper Trade",value:t.results.generalInfo.paper_mode},{label:"PNL",value:`${t.results.generalInfo.pnl} (${t.results.generalInfo.pnl_perc}%)`},{label:"Started",value:R.timestampToTime(t.results.generalInfo.started_at)},{label:"Started/Current Balance",value:`${t.results.generalInfo.started_balance} / ${t.results.generalInfo.current_balance}`},{label:"Trades",value:`${t.results.generalInfo.count_trades}`}];return t.results.generalInfo.leverage_type!=="spot"&&(e.push({label:"Available Margin",value:`${t.results.generalInfo.available_margin}`}),e.push({label:"Leverage",value:`${t.results.generalInfo.leverage}x (${t.results.generalInfo.leverage_type})`})),e}),J=h(()=>T.notificationApiKeys.map(e=>({label:`${e.name} - ${e.driver}`,value:e.id}))),G=h(()=>Math.round(t.results.progressbar.estimated_remaining_seconds)===0?"Please wait...":`${Math.round(t.results.progressbar.estimated_remaining_seconds)} seconds remaining...`),K=h(()=>{if(!t.results.orders)return[];const e=[],s=5,E=t.results.orders.length,P=E-s>=0?E-s:0;for(let W=E-1;W>=P;W--){const C=t.results.orders[W],j=C.status==="PARTIALLY FILLED"?`${C.filled_qty}/${C.qty}`:C.qty;e.push([{value:R.timestampToTimeOnly(C.created_at),style:"text-xs",tooltip:R.timestampToTime(C.created_at)},{value:C.symbol,style:"text-xs"},{value:C.type,style:"text-xs"},{value:C.side,style:R.colorBasedOnSide(C.side)},{value:C.price,style:"text-xs"},{value:j,style:R.colorBasedOnSide(C.side)},{value:C.status,style:"text-xs"}])}return e}),se=h(()=>{let e=[];const s=T.jesseSupportedTimeframes;return T.settings.live.generate_candles_from_1m||!t.form.exchange?e=s.map(E=>T.planLimits.timeframes.includes(E)?{label:E,value:E,disabled:!1}:{label:`${E} (Upgrade required)`,value:E,disabled:!0}):e=T.exchangeInfo[t.form.exchange].supported_timeframes.map(P=>T.planLimits.timeframes.includes(P)?{label:P,value:P,disabled:!1}:{label:`${P} (Upgrade required)`,value:P,disabled:!0}),e}),X=h(()=>T.liveTradingExchangeNames.map(e=>T.planLimits.exchanges.includes(e)?{label:e,value:e,disabled:!1}:{label:`${e} (Upgrade required)`,value:e,disabled:!0})),oe=h(()=>T.exchangeApiKeys.map(e=>T.planLimits.exchanges.includes(e.exchange)?{label:`${e.exchange} - ${e.name}`,value:e.id,disabled:!1}:{label:`${e.exchange} - ${e.name} (Upgrade required)`,value:e.id,disabled:!0})),p=U.cancel,y=U.newLive;function S(e){if(v.value.length){for(let s=0;s<v.value.length;s++)B("error",v.value[s]);return}if(t.form.paper_mode&&!t.form.exchange||!t.form.paper_mode&&t.form.exchange_api_key_id===""){B("error","Please select an exchange");return}U.start(e)}function A(e){O.value=!1,U.stop(e)}function M(){b.value=!0,navigator.clipboard.writeText(t.results.infoLogs),B("success","Logs copied successfully"),_.value=!0,setTimeout(()=>{_.value=!1},3e3)}function ue(){r.value=!0,navigator.clipboard.writeText(t.results.errorLogs),B("success","Logs copied successfully"),d.value=!0,setTimeout(()=>{d.value=!1},3e3)}const de=h(()=>["basic","pro","enterprise","lifetime"].includes(T.plan));return(e,s)=>{const E=Ct,P=Ge,W=At,C=ot,j=ie,$e=Ke,we=lt,ce=at,Y=Xe,re=dt,Te=rt,me=et,Ce=ke,Ve=Ft,ne=xe,Le=it,Se=ft,Ee=ut;return a(),f(F,null,[o(P,{modelValue:n(c),"onUpdate:modelValue":s[0]||(s[0]=u=>D(c)?c.value=u:null),size:"ultra",title:"Orders"},{default:x(()=>[o(E,{orders:e.results.orders},null,8,["orders"])]),_:1},8,["modelValue"]),o(P,{modelValue:n(i),"onUpdate:modelValue":s[2]||(s[2]=u=>D(i)?i.value=u:null),size:"small",title:"Report An Issue"},{default:x(()=>[o(W,{session:e.session,onClose:s[1]||(s[1]=u=>i.value=!1)},null,8,["session"])]),_:1},8,["modelValue"]),o(P,{modelValue:n(m),"onUpdate:modelValue":s[3]||(s[3]=u=>D(m)?m.value=u:null),title:"Info Logs"},{default:x(()=>[o(C,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:x(()=>[l("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:M},[n(_)?(a(),V(n(ge),{key:0,class:"h-6 w-6","aria-hidden":"true"})):k("",!0),!n(_)&&e.results.infoLogs.length!=0?(a(),V(n(ve),{key:1,class:"h-6 w-6","aria-hidden":"true"})):k("",!0)])]),_:1},8,["modelValue"]),o(P,{modelValue:n(I),"onUpdate:modelValue":s[4]||(s[4]=u=>D(I)?I.value=u:null),title:"Error Logs"},{default:x(()=>[o(C,{logs:e.results.errorLogs},null,8,["logs"])]),buttons:x(()=>[l("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:ue},[n(d)?(a(),V(n(ge),{key:0,class:"h-6 w-6","aria-hidden":"true"})):k("",!0),!n(d)&&e.results.errorLogs.length!=0?(a(),V(n(ve),{key:1,class:"h-6 w-6","aria-hidden":"true"})):k("",!0)])]),_:1},8,["modelValue"]),o($e,{modelValue:n(O),"onUpdate:modelValue":s[6]||(s[6]=u=>D(O)?O.value=u:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:x(()=>[o(j,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:s[5]||(s[5]=u=>A((e._.provides[te]||e.$route).params.id))})]),_:1},8,["modelValue"]),e.results.booting?(a(),f("div",qt,[l("div",null,[o(we,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?k("",!0):(a(),f("h3",{key:0,class:"mt-8 animate-pulse",textContent:N(n(G))},null,8,Ht)),l("div",Wt,[e.form.debug_mode?(a(),V(j,{key:0,icon:"i-heroicons-clipboard-document-list",variant:"solid",label:"View Logs",size:"xl",class:"flex justify-center w-64",onClick:s[7]||(s[7]=u=>m.value=!0)})):k("",!0),o(j,{color:"gray",class:"w-64 flex justify-center mt-4",size:"xl",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},icon:"i-heroicons-no-symbol",variant:"solid",label:"Cancel",trailing:!1,onClick:s[8]||(s[8]=u=>n(p)((e._.provides[te]||e.$route).params.id))})]),e.results.exception.error?(a(),f("div",Yt,[o(ce,{modelValue:n(g),"onUpdate:modelValue":s[9]||(s[9]=u=>D(g)?g.value=u:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):k("",!0)])):(a(),V(Ee,{key:1},{left:x(()=>[!e.results.booting&&!e.results.monitoring&&!e.results.showResults?(a(),f("div",Qt,[o(Y,{class:"mb-4",title:"Exchange"}),e.form.paper_mode?(a(),V(re,{key:0,modelValue:e.form.exchange,"onUpdate:modelValue":s[10]||(s[10]=u=>e.form.exchange=u),placeholder:"Select an exchange...",searchable:"",options:n(X),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:H},null,8,["modelValue","options"])):(a(),V(re,{key:1,modelValue:e.form.exchange_api_key_id,"onUpdate:modelValue":s[11]||(s[11]=u=>e.form.exchange_api_key_id=u),placeholder:"Select an exchange...",searchable:"",options:n(oe),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:H},{empty:x(()=>[l("div",Zt,[Jt,o(j,{to:"/exchange-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Exchange API Key"})])]),_:1},8,["modelValue","options"])),o(Te,{"total-routes-error":n(v),form:e.form,results:e.results,mode:"live",symbols:n(L),timeframes:n(se)},null,8,["total-routes-error","form","results","symbols","timeframes"]),o(Y,{class:"mt-16 mb-4",title:"Options"}),l("div",Gt,[o(me,{modelValue:e.form.debug_mode,"onUpdate:modelValue":s[12]||(s[12]=u=>e.form.debug_mode=u),title:"Debug Mode",description:"Logs more details, helpful for debugging."},null,8,["modelValue"]),o(me,{modelValue:e.form.paper_mode,"onUpdate:modelValue":s[13]||(s[13]=u=>e.form.paper_mode=u),title:"Paper Trade",disabled:!n(de),"disabled-guide":n(de)?"":"Premium plan required",description:"Trade in real-time using actual exchange data with PAPER money."},null,8,["modelValue","disabled","disabled-guide"]),o(Ce,{label:"Notifications:",help:"Select a notification driver to receive notifications"},{default:x(()=>[o(re,{modelValue:e.form.notification_api_key_id,"onUpdate:modelValue":s[14]||(s[14]=u=>e.form.notification_api_key_id=u),placeholder:"Select a notification driver",size:"lg",options:n(J),"value-attribute":"value"},{empty:x(()=>[l("div",Kt,[Xt,o(j,{to:"/notification-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Notification API Key"})])]),_:1},8,["modelValue","options"])]),_:1})])])):k("",!0),e.results.monitoring?(a(),f("div",es,[e.results.exception.error?(a(),f("div",ts,[o(ce,{title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["title","content","debug-mode"])])):k("",!0),e.results.monitoring&&!e.results.finished&&!e.results.exception.error?(a(),V(Ve,{key:1,results:e.results,form:e.form,exchange:e.form.exchange},null,8,["results","form","exchange"])):k("",!0),o(Y,{class:"mb-4",title:"Routes"}),o(ne,{data:e.results.routes,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),o(Y,{class:"mt-12 mb-4",title:"Positions"}),o(ne,{data:e.results.positions,"header-items":["Symbol","QTY","Entry","Price","Liq Price","PNL"],header:""},null,8,["data"]),o(Le,{class:"mt-12 mb-4",title:"Orders"},{default:x(()=>[l("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-900 text-sm leading-5 font-medium rounded-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",onClick:s[15]||(s[15]=u=>c.value=!0)},[o(n(vt),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),ss])]),_:1}),o(ne,{data:n(K),"header-items":["Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])])):k("",!0)]),right:x(()=>[e.results.booting?k("",!0):(a(),f("div",os,[e.results.monitoring?(a(),f("div",rs,[e.results.finished?(a(),V(j,{key:0,class:"w-full flex justify-center",variant:"solid",icon:"i-heroicons-plus",size:"xl",label:"New session",onClick:s[16]||(s[16]=u=>n(y)((e._.provides[te]||e.$route).params.id))})):(a(),V(j,{key:1,class:"w-full flex justify-center",variant:"solid",color:"gray",icon:"i-heroicons-no-symbol",size:"xl",label:e.results.terminating?"Terminating...":"Terminate",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},onClick:s[17]||(s[17]=u=>O.value=!0)},null,8,["label"])),e.results.monitoring||e.results.finished?(a(),V(j,{key:2,class:"w-full flex justify-center mt-4",variant:"solid",color:"gray",icon:"i-heroicons-flag",size:"xl",label:"Report",onClick:s[18]||(s[18]=u=>i.value=!0)})):k("",!0)])):(a(),f("div",ns,[o(j,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:s[19]||(s[19]=u=>S((e._.provides[te]||e.$route).params.id))})]))])),e.results.monitoring?(a(),f("hr",ls)):k("",!0),e.results.monitoring?(a(),f("dl",as,[(a(!0),f(F,null,ae(n(Z),u=>(a(),f("div",{key:u.label,class:"flex justify-between items-center"},[l("div",is,N(u.label)+":",1),l("div",us,N(u.value),1)]))),128)),l("div",ds,[l("div",cs,[l("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:s[20]||(s[20]=u=>m.value=!0)},[ms,l("span",ps,[o(n(be),{class:"w-6 h-6 ml-2"})])])]),l("div",fs,N(e.results.generalInfo.count_info_logs),1)]),l("div",gs,[l("div",vs,[l("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:s[21]||(s[21]=u=>I.value=!0)},[ys,l("span",bs,[o(n(be),{class:"w-6 h-6 ml-2 cursor-pointer"})])])]),l("div",hs,N(e.results.generalInfo.count_error_logs),1)])])):k("",!0),e.results.monitoring&&e.results.watchlist.length?(a(),f("div",_s,[o(Y,{class:"mt-8 mb-4",title:"Watch List"}),o(Se,{data:e.results.watchlist},null,8,["data"])])):k("",!0)]),_:1}))],64)}}}),xs={class:"w-full"},Ps=z({__name:"[id]",setup(w){gt({title:"Live/Paper trading - Jesse"});const t=q(),v=h(()=>t.tabs),g=he(),b=h(()=>g.params.id),r=h(()=>{if(!v.value[b.value]){const _=Object.keys(v.value);if(_.length>0){const d=v.value[_[0]];return tt().push(`/live/${d.id}`),d}}return v.value[b.value]});return Object.keys(v.value).length===0&&q().addTab(),(_,d)=>{const c=Tt,i=ks;return a(),f(F,null,[l("div",xs,[o(c,{tabs:v.value,onClose:n(t).closeTab},null,8,["tabs","onClose"])]),r.value?(a(),V(i,{key:0,form:r.value.form,results:r.value.results,session:b.value},null,8,["form","results","session"])):k("",!0)],64)}}});export{Ps as default};
